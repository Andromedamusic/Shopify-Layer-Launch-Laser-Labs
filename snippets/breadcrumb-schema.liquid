{%- comment -%}
  BreadcrumbList Schema (JSON-LD) for rich search results
  Usage: {% render 'breadcrumb-schema', breadcrumbs: breadcrumbs %}
  breadcrumbs should be an array of objects with 'title' and 'url' properties
{%- endcomment -%}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ shop.url }}"
    }
    {%- if collection -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": "Collections",
      "item": "{{ shop.url }}/collections"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": {{ collection.title | json }},
      "item": "{{ shop.url }}{{ collection.url }}"
    }
    {%- endif -%}
    {%- if product -%}
    ,{
      "@type": "ListItem",
      "position": {% if collection %}4{% else %}2{% endif %},
      "name": {{ product.title | json }},
      "item": "{{ shop.url }}{{ product.url }}"
    }
    {%- endif -%}
  ]
}
</script>
