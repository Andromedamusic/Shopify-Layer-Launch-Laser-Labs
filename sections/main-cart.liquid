<div class="cart-page page-width">
  <h1 class="cart-page__title h1">{{ 'templates.cart.cart' | t }}</h1>

  {%- if cart.item_count > 0 -%}
    <form action="{{ routes.cart_url }}" method="post" class="cart-form">
      <div class="cart-items">
        {%- for item in cart.items -%}
          <div class="cart-item" data-key="{{ item.key }}">
            <div class="cart-item__image">
              {%- if item.image -%}
                {{ item.image | image_url: width: 150 | image_tag: loading: 'lazy', alt: item.title }}
              {%- endif -%}
            </div>

            <div class="cart-item__details">
              <h3 class="cart-item__title">
                <a href="{{ item.url }}">{{ item.product.title }}</a>
              </h3>

              {%- if item.variant.title != 'Default Title' -%}
                <p class="cart-item__variant">{{ item.variant.title }}</p>
              {%- endif -%}

              {%- if item.properties.size > 0 -%}
                <div class="cart-item__properties">
                  {%- for property in item.properties -%}
                    {%- unless property.last == blank or property.first contains '_' -%}
                      <p class="cart-item__property">
                        <strong>{{ property.first }}:</strong> {{ property.last }}
                      </p>
                    {%- endunless -%}
                  {%- endfor -%}
                </div>
              {%- endif -%}

              <div class="cart-item__quantity">
                <label for="quantity-{{ item.key }}">Qty:</label>
                <input
                  type="number"
                  id="quantity-{{ item.key }}"
                  name="updates[{{ item.key }}]"
                  value="{{ item.quantity }}"
                  min="0"
                  class="cart-item__quantity-input"
                >
              </div>
            </div>

            <div class="cart-item__price">
              {{ item.line_price | money }}
            </div>

            <a href="{{ item.url_to_remove }}" class="cart-item__remove" aria-label="Remove item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </a>
          </div>
        {%- endfor -%}
      </div>

      <div class="cart-footer">
        {%- comment -%} Trust/Reassurance Section - Reduces cart abandonment {%- endcomment -%}
        <div class="cart-reassurance">
          <div class="cart-reassurance__item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            <span>Free design proof within 24-48 hours</span>
          </div>
          <div class="cart-reassurance__item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="1" y="3" width="15" height="13"/>
              <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/>
              <circle cx="5.5" cy="18.5" r="2.5"/>
              <circle cx="18.5" cy="18.5" r="2.5"/>
            </svg>
            <span>Free shipping on orders over $75</span>
          </div>
          <div class="cart-reassurance__item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
            <span>Michigan-made quality guarantee</span>
          </div>
        </div>

        <div class="cart-footer__totals">
          <div class="cart-footer__subtotal">
            <span>Subtotal</span>
            <span>{{ cart.total_price | money }}</span>
          </div>
          <p class="cart-footer__note">
            <strong>What happens next:</strong> Shipping calculated at checkout.
            You'll receive your design proof via email within 24-48 hours.
          </p>
        </div>

        <div class="cart-footer__actions">
          <button type="submit" name="update" class="button button--secondary">Update Cart</button>
          <button type="submit" name="checkout" class="button button--primary">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
            Secure Checkout
          </button>
        </div>
      </div>
    </form>
  {%- else -%}
    <div class="cart-empty">
      <p>Your cart is empty.</p>
      <a href="/collections/all" class="button button--primary">Continue Shopping</a>
    </div>
  {%- endif -%}
</div>

<style>
  .cart-page {
    padding: 40px 0 80px;
  }

  .cart-page__title {
    margin-bottom: 2rem;
  }

  .cart-items {
    border-top: 1px solid #eee;
  }

  .cart-item {
    display: grid;
    grid-template-columns: 100px 1fr auto auto;
    gap: 1.5rem;
    align-items: start;
    padding: 1.5rem 0;
    border-bottom: 1px solid #eee;
  }

  @media (max-width: 749px) {
    .cart-item {
      grid-template-columns: 80px 1fr auto;
    }
  }

  .cart-item__image img {
    width: 100%;
    border-radius: 4px;
  }

  .cart-item__title {
    font-size: 1.6rem;
    margin: 0 0 0.5rem;
  }

  .cart-item__title a {
    color: inherit;
    text-decoration: none;
  }

  .cart-item__variant,
  .cart-item__property {
    font-size: 1.4rem;
    color: rgba(0,0,0,0.6);
    margin: 0 0 0.25rem;
  }

  .cart-item__quantity {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 1rem;
  }

  .cart-item__quantity-input {
    width: 60px;
    text-align: center;
  }

  .cart-item__price {
    font-weight: 600;
    font-size: 1.6rem;
  }

  .cart-item__remove {
    color: rgba(0,0,0,0.65);
    transition: color 0.2s;
  }

  .cart-item__remove:hover {
    color: #c62828;
  }

  .cart-footer {
    margin-top: 2rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  /* Cart Reassurance Section - Trust Building */
  .cart-reassurance {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    padding: 1.25rem 1.5rem;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 12px;
    border: 1px solid #e0e0e0;
  }
  .cart-reassurance__item {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-size: 1.35rem;
    color: #2d3436;
    flex: 1 1 auto;
    min-width: 200px;
  }
  .cart-reassurance__item svg {
    color: #27ae60;
    flex-shrink: 0;
  }
  @media (max-width: 749px) {
    .cart-reassurance {
      flex-direction: column;
      gap: 0.75rem;
    }
    .cart-reassurance__item {
      min-width: 100%;
    }
  }

  .cart-footer__row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: 2rem;
  }

  .cart-footer__subtotal {
    display: flex;
    justify-content: space-between;
    font-size: 1.8rem;
    font-weight: 600;
    gap: 2rem;
  }

  .cart-footer__note {
    font-size: 1.4rem;
    color: #555;
    margin: 0.75rem 0 0;
    line-height: 1.5;
  }
  .cart-footer__note strong {
    color: #1a1a1a;
  }

  .cart-footer__actions {
    display: flex;
    gap: 1rem;
    justify-content: flex-end;
  }
  .cart-footer__actions .button--primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
    padding: 1rem 2rem;
    font-size: 1.5rem;
  }
  .cart-footer__actions .button--primary:hover {
    background: linear-gradient(135deg, #219a52 0%, #27ae60 100%);
  }
  .cart-footer__actions .button--primary svg {
    stroke: white;
  }

  .cart-empty {
    text-align: center;
    padding: 4rem 0;
  }

  .cart-empty p {
    color: rgba(0,0,0,0.65);
    margin-bottom: 1.5rem;
  }
</style>

{% schema %}
{
  "name": "Cart Page",
  "tag": "section",
  "class": "section-cart"
}
{% endschema %}
