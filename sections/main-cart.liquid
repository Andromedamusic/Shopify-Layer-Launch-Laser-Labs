<div class="cart-page page-width">
  <h1 class="cart-page__title h1">{{ 'templates.cart.cart' | t }}</h1>

  {%- if cart.item_count > 0 -%}
    <form action="{{ routes.cart_url }}" method="post" class="cart-form">
      <div class="cart-items">
        {%- for item in cart.items -%}
          <div class="cart-item" data-key="{{ item.key }}">
            <div class="cart-item__image">
              {%- if item.image -%}
                {{ item.image | image_url: width: 150 | image_tag: loading: 'lazy', alt: item.title }}
              {%- endif -%}
            </div>

            <div class="cart-item__details">
              <h3 class="cart-item__title">
                <a href="{{ item.url }}">{{ item.product.title }}</a>
              </h3>

              {%- if item.variant.title != 'Default Title' -%}
                <p class="cart-item__variant">{{ item.variant.title }}</p>
              {%- endif -%}

              {%- if item.properties.size > 0 -%}
                <div class="cart-item__properties">
                  {%- for property in item.properties -%}
                    {%- unless property.last == blank or property.first contains '_' -%}
                      <p class="cart-item__property">
                        <strong>{{ property.first }}:</strong> {{ property.last }}
                      </p>
                    {%- endunless -%}
                  {%- endfor -%}
                </div>
              {%- endif -%}

              <div class="cart-item__quantity">
                <label for="quantity-{{ item.key }}">Qty:</label>
                <input
                  type="number"
                  id="quantity-{{ item.key }}"
                  name="updates[{{ item.key }}]"
                  value="{{ item.quantity }}"
                  min="0"
                  class="cart-item__quantity-input"
                >
              </div>
            </div>

            <div class="cart-item__price">
              {{ item.line_price | money }}
            </div>

            <a href="{{ item.url_to_remove }}" class="cart-item__remove" aria-label="Remove item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </a>
          </div>
        {%- endfor -%}
      </div>

      <div class="cart-footer">
        <div class="cart-footer__totals">
          <div class="cart-footer__subtotal">
            <span>Subtotal</span>
            <span>{{ cart.total_price | money }}</span>
          </div>
          <p class="cart-footer__note">Shipping and taxes calculated at checkout.</p>
        </div>

        <div class="cart-footer__actions">
          <button type="submit" name="update" class="button button--secondary">Update Cart</button>
          <button type="submit" name="checkout" class="button button--primary">Checkout</button>
        </div>
      </div>
    </form>
  {%- else -%}
    <div class="cart-empty">
      <p>Your cart is empty.</p>
      <a href="/collections/all" class="button button--primary">Continue Shopping</a>
    </div>
  {%- endif -%}
</div>

<style>
  .cart-page {
    padding: 40px 0 80px;
  }

  .cart-page__title {
    margin-bottom: 2rem;
  }

  .cart-items {
    border-top: 1px solid #eee;
  }

  .cart-item {
    display: grid;
    grid-template-columns: 100px 1fr auto auto;
    gap: 1.5rem;
    align-items: start;
    padding: 1.5rem 0;
    border-bottom: 1px solid #eee;
  }

  @media (max-width: 749px) {
    .cart-item {
      grid-template-columns: 80px 1fr auto;
    }
  }

  .cart-item__image img {
    width: 100%;
    border-radius: 4px;
  }

  .cart-item__title {
    font-size: 1.6rem;
    margin: 0 0 0.5rem;
  }

  .cart-item__title a {
    color: inherit;
    text-decoration: none;
  }

  .cart-item__variant,
  .cart-item__property {
    font-size: 1.4rem;
    color: rgba(0,0,0,0.6);
    margin: 0 0 0.25rem;
  }

  .cart-item__quantity {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 1rem;
  }

  .cart-item__quantity-input {
    width: 60px;
    text-align: center;
  }

  .cart-item__price {
    font-weight: 600;
    font-size: 1.6rem;
  }

  .cart-item__remove {
    color: rgba(0,0,0,0.4);
    transition: color 0.2s;
  }

  .cart-item__remove:hover {
    color: #c62828;
  }

  .cart-footer {
    margin-top: 2rem;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: 2rem;
  }

  .cart-footer__subtotal {
    display: flex;
    justify-content: space-between;
    font-size: 1.8rem;
    font-weight: 600;
    gap: 2rem;
  }

  .cart-footer__note {
    font-size: 1.4rem;
    color: rgba(0,0,0,0.5);
    margin: 0.5rem 0 0;
  }

  .cart-footer__actions {
    display: flex;
    gap: 1rem;
  }

  .cart-empty {
    text-align: center;
    padding: 4rem 0;
  }

  .cart-empty p {
    color: rgba(0,0,0,0.5);
    margin-bottom: 1.5rem;
  }
</style>

{% schema %}
{
  "name": "Cart Page",
  "tag": "section",
  "class": "section-cart"
}
{% endschema %}
